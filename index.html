<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHOREFY | Домашние обязанности на неделю</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
    <h1><i class="fas fa-broom"></i> CHOREFY | Домашние обязанности на неделю</h1>
    </header>
    <table>
        <thead>
            <tr>
                <th>Обязанность</th>
                <th>ПН</th>
                <th>ВТ</th>
                <th>СР</th>
                <th>ЧТ</th>
                <th>ПТ</th>
                <th>СБ</th>
                <th>ВС</th>
            </tr>
        </thead>
        <tbody id="tasks-table-body">
            <!-- Статически добавленные задачи -->
            <tr>
                <td>Мусор</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
                <td class="lev">Л</td>
            </tr>
            <tr>
                <td>Стирка</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
            </tr>
            <tr>
                <td>Белье постельное</td>
                <td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="nikol">Н <i class="fas fa-moon"></i></td>
            </tr>
            <tr>
                <td>Пылесос гостинная</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
            </tr>
            <tr>
                <td>Пылесос спальня</td>
                <td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="nikol">Н</td><td class="default"></td>
            </tr>
            <tr>
                <td>Пылесос Оскар</td>
                <td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="default"></td>
            </tr>
            <tr>
                <td>Кухня перед сном</td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
                <td class="nikol">Н <i class="fas fa-moon"></i></td>
            </tr>
            <tr>
                <td>Посудомойка</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
                <td class="nikol">Н</td>
            </tr>
            <tr>
                <td>Помыть посудомойку</td>
                <td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="nikol">Н <i class="fas fa-sun"></i></td>
            </tr>
            <tr>
                <td>Помыть стиралку</td>
                <td class="nikol">Н <i class="fas fa-sun"></i></td><td class="default"></td><td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="nikol">Н <i class="fas fa-sun"></i></td>
            </tr>
            <tr>
                <td>Помыть унитаз</td>
                <td class="default"></td><td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="default"></td><td class="nikol">Н</td>
            </tr>
            <tr>
                <td>Поменять таблетку в унитазе</td>
                <td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="nikol">Н</td>
            </tr>
            <tr>
                <td>Протереть пыль</td>
                <td class="nikol">Н</td><td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="nikol">Н</td><td class="default"></td>
            </tr>
            <tr>
                <td>Пылесос коридор</td>
                <td class="default"></td><td class="default"></td><td class="lev">Л</td><td class="default"></td><td class="lev">Л</td><td class="default"></td><td class="lev">Л</td>
            </tr>
            <tr>
                <td>Экран ТВ + монитор</td>
                <td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td><td class="default"></td>
            </tr>
            <tr>
                <td>Помыть пол в кухне</td>
                <td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="default"></td><td class="lev">Л</td><td class="default"></td>
            </tr>
            <tr>
                <td>Ванная комната</td>
                <td class="default"></td><td class="nikol">Н</td><td class="default"></td><td class="default"></td><td class="default"></td><td class="nikol">Н</td><td class="default"></td>
            </tr>
            <!-- Задачи с текстом "КД" -->
            <tr>
                <td>Свалка коридор</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Свалка угол возле дивана</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Угол Н</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Угол Льва</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Стол Льва</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Стол гостинная</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
            <tr>
                <td>Дальний угол кухни</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
                <td class="default">КД</td>
            </tr>
        </tbody>
    </table>

    <button id="theme-toggle" aria-label="Toggle Dark Mode">
        <i id="theme-icon" class="fas fa-moon"></i>
    </button>

    <p>Чего-то не хватает, или убрать добавленные? <a href="config.html">Настроить задачи...</a></p>

    <!-- <div class="legend">
        <div><span class="lev-color"></span>Л</div>
        <div><span class="nikol-color"></span>Н</div>
    </div> -->

    <script>
document.addEventListener('DOMContentLoaded', () => {
    const tasksTableBody = document.getElementById('tasks-table-body');

    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    // Добавляем задачи из Local Storage
    tasks.forEach(task => {
        const row = document.createElement('tr');
        const taskCell = document.createElement('td');
        taskCell.textContent = task.name;
        row.appendChild(taskCell);

        for (let i = 0; i < 7; i++) {
            const dayCell = document.createElement('td');
            dayCell.className = 'default';
            dayCell.onclick = function() { toggleAssignee(dayCell); };
            row.appendChild(dayCell);
        }

        tasksTableBody.appendChild(row);
    });

    // Выделяем текущий день
    highlightToday();

    function highlightToday() {
        const todayIndex = new Date().getDay(); // Sunday is 0, Monday is 1, etc.
        const adjustedIndex = todayIndex === 0 ? 7 : todayIndex; // Переводим Sunday = 0 на последний день недели
        const headers = document.querySelectorAll('th');
        headers[adjustedIndex].classList.add('highlight-today');

        const rows = tasksTableBody.querySelectorAll('tr');
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            cells[adjustedIndex].classList.add('highlight-today');
        });
    }
});

function toggleAssignee(cell) {
    if (cell.classList.contains('lev')) {
        cell.classList.remove('lev');
        cell.classList.add('nikol');
        cell.textContent = 'Н';
    } else if (cell.classList.contains('nikol')) {
        cell.classList.remove('nikol');
        cell.textContent = '';
        cell.classList.add('default');
    } else {
        cell.classList.remove('default');
        cell.classList.add('lev');
        cell.textContent = 'Л';
    }
}


document.addEventListener('DOMContentLoaded', () => {
    const todayIndex = new Date().getDay(); // Sunday is 0, Monday is 1, etc.
    const adjustedIndex = todayIndex === 0 ? 7 : todayIndex; // Переводим Sunday = 0 на последний день недели

    const allDays = document.querySelectorAll('th, td');
    allDays.forEach((cell, index) => {
        if ((index % 8) !== adjustedIndex) {
            cell.classList.add('hide-on-mobile');
        }
    });
});

const themeToggle = document.getElementById('theme-toggle');

themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
    } else {
        localStorage.setItem('theme', 'light');
    }
});

// Сохранение темы при перезагрузке
if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark-mode');
}
    </script>
    <footer>
        <p>© 2024 Л и Н. Сделано с любовью и заботой о доме <i class="fas fa-home"></i></p>
    </footer>
</body>
</html>
